# QR_Video

一个基于 CIMBAR (Color Icon Matrix Barcode) 的文件编解码工具，可以将文件编码为视频并从视频中解码还原文件。

## 功能特点

- 支持任意类型文件的编码和解码
- 使用 CIMBAR 技术实现高密度数据存储
- 图形化界面，操作简单直观
- 支持视频格式的数据传输
- 内置纠错机制，提高数据恢复可靠性

## 核心优势

1. 通用性强
   - 支持所有文件格式的编解码
   - 最大支持约 122.18GB 的文件处理
   - 传输速率达到 103.125KB/s

2. 数据可靠性
   - 实现完全无损传输
   - 确保数据字节无重复与遗失
   - 内置数据校验机制
   - 双重纠错技术（Reed-Solomon + 交织编码）
   - 高效抵抗突发性错误
   
3. 安全性与隐私性
   - 完全本地离线运行
   - 无需互联网支持
   - 数据传输过程不依赖第三方服务

## 源文件、编码文件对比

1. txt文件
   ![txt.png](/img/txt.png)
2. word文件
   ![word.png](/img/word.png)
3. jpg文件
   ![jpg.png](/img/jpg.png)
4. pdf文件
   ![pdf.png](/img/pdf.png)

## 预览编码结果

1. 编码结果图片
   ![encoded.png](/img/encoded.png)
2. 编码结果视频
   ![encoded.gif](/img/encoded.gif)

## 系统要求

- Python 3.8+
- PyQt5
- OpenCV (cv2)
- Pillow
- cimbar
- numpy

## 安装说明

1. 克隆仓库到本地：

```bash
git clone https://github.com/Episode233/QR_Video.git
cd QR_Video
```

2. 安装依赖：

```bash
pip install -r requirements.txt
```

## 使用方法

### 文件编码

1. 运行编码程序：

```bash
python encode.encode.py
```

2. 在打开的图形界面中：
   - 点击"选择文件"按钮选择要编码的文件
   - 点击"选择文件夹"按钮选择输出目录
   - 点击"开始编码"按钮开始处理

3. 程序会在输出目录生成编码后的视频文件 `output_video.avi`

### 文件解码

1. 运行解码程序：

```bash
python decode.decode.py
```

2. 在打开的图形界面中：
   - 点击"选择文件"按钮选择要解码的视频文件
   - 点击"选择文件夹"按钮选择输出目录
   - 点击"开始解码"按钮开始处理

3. 程序会在输出目录还原原始文件

## 项目结构

```
.
├── bitmap/           # 图像资源文件
├── cimbar/           # CIMBAR 实现
├── encode/           # 编码程序目录
│   ├── encode.py       # 编码器入口
│   └── module.py       # 编码器方法
│   └── ui.py       	# 编码器界面
├── decode/           # 解码程序目录
│   ├── decode.py       # 解码器入口
│   └── module.py       # 解码器方法
│   └── ui.py       	# 解码器界面
├── qrcreate/         # 测试生成普通二维码
├── build.txt         # 构建exe程序命令
└── requirements.txt  # 依赖环境
```

## 技术细节

### 编码过程

1. 文件预处理：
   - 读取原始文件
   - 添加文件类型和填充信息
   - 数据分块

2. CIMBAR 编码：
   - 使用 Reed-Solomon 编码进行纠错处理
   - 应用交织编码（Interleaving）提高抗干扰能力
     - 分散突发错误的影响
     - 提高数据恢复的可靠性
   - 生成颜色图标矩阵条形码
   - 图像拼接排列
   
3. 视频生成：
   - 图像序列转换为视频流
   - 添加首尾帧以增强识别稳定性

### 解码过程

1. 视频处理：
   - 视频帧提取
   - 图像分割定位

2. CIMBAR 解码：
   - 识别颜色图标矩阵
   - 交织解码恢复原始数据顺序
   - Reed-Solomon 纠错恢复
   - 数据重组与校验
   
3. 文件还原：
   - 解析文件类型信息
   - 移除填充数据
   - 写入原始文件

## 注意事项

1. 确保视频文件清晰度足够，避免严重模糊或失真
2. 推荐使用原始视频文件进行解码，避免二次压缩
3. 解码时注意选择正确的输出路径，确保有足够的存储空间
4. 较大文件可能需要更长的处理时间，请耐心等待

## 错误处理

如果遇到编解码失败，请检查：

1. 文件是否损坏
2. 视频是否完整清晰
3. 是否有足够的磁盘空间
4. 文件路径是否包含特殊字符

## License

MIT License

## 贡献指南

欢迎提交 Issue 和 Pull Request。在提交代码前，请确保：

1. 代码风格符合项目规范
2. 添加必要的测试用例
3. 更新相关文档
4. 提供清晰的提交信息

## 未来优化方向

1. 视频编解码优化
   - 改进视频编码逻辑
   - 优化视频压缩算法
   - 提升视频处理效率

2. 错误处理增强
   - 引入喷泉码（Fountain Code）技术
   - 提高数据传输的容错能力
   - 优化纠错编码机制

3. 性能提升
   - 减少压缩时间
   - 优化内存使用
   - 提高处理速度

4. 用户体验改进
   - 优化进度显示
   - 添加更多配置选项
   - 完善错误提示机制

## 联系方式

如有问题，请通过 GitHub Issues 提交